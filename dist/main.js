"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var Flipbook=exports.Flipbook=function t(e){_classCallCheck(this,t),this._el=e,this._currentPage=0,this._pages=Array.prototype.slice.apply(this._el.querySelectorAll(".flipbook__page")),this._pageCount=this._pages.length-1,this._transitionDuration=1e3,this._clips=["clip-right","clip-left"],this._flipInProgress=!1,this._pages[this._currentPage].classList.add("current")},proto=Flipbook.prototype;proto.flipToPage=function(t){if(0>t||t>this._pageCount||t==this._currentPage||this._flipInProgress)return!1;var e=t<this._currentPage?0:1,s=this._pages[this._currentPage],i=this._pages[t],r=e?"flipping-forward":"flipping-backward",a=this._createFlipPage(s,i,e);return this._el.insertBefore(a,this._el.firstChild),setTimeout(function(){a.classList.add(r)},1),this._flipInProgress=!0,setTimeout(function(){this._el.removeChild(a),this._flipInProgress=!1,this._setCurrentPage(t),this._removeClipClasses()}.bind(this),this._transitionDuration),!0},proto._createFlipPage=function(t,e,s){var i=t.cloneNode(!0),r=e.cloneNode(!0),a=this._clips[s],o=s?this._clips[0]:this._clips[1],l=document.createElement("div");return l.classList.add("flipPage"),i.classList.add(a),r.classList.add(o),r.classList.add("back"),t.classList.add(o),e.classList.add("to"),l.appendChild(i),l.appendChild(r),l},proto._setCurrentPage=function(t){this._currentPage=t;var e=document.querySelector(".flipbook__page.current"),s=document.querySelector(".flipbook__page.to"),i=this._pages[this._currentPage];e.classList.remove("current"),s.classList.remove("to"),i.classList.add("current")},proto._removeClipClasses=function(){this._pages.forEach(function(t){t.classList.remove("clip-right"),t.classList.remove("clip-left")})};